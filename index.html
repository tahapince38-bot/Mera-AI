<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mera AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .chat-container { height: calc(100vh - 160px); }
        body { background-color: #050505; color: white; }
    </style>
</head>
<body>
    <header class="p-4 border-b border-gray-800 flex justify-between items-center bg-black sticky top-0 z-10">
        <h1 class="text-2xl font-bold text-blue-500">Mera AI</h1>
        <div id="user-section">
            <button id="login-btn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-medium transition">Google Login</button>
            <div id="user-info" class="hidden flex items-center gap-3">
                <span id="user-name" class="text-sm border-r border-gray-700 pr-3"></span>
                <button id="logout-btn" class="text-xs text-gray-400 underline">Logout</button>
            </div>
        </div>
    </header>

    <main class="chat-container overflow-y-auto p-4 space-y-4" id="chat-box">
        <div class="text-center mt-10 text-gray-500">
            <p class="text-xl">Assalam-o-Alaikum! Main hoon <span class="text-blue-400">Mera AI</span>.</p>
            <p class="text-sm mt-2">Shuru karne ke liye upar Google Login karein.</p>
        </div>
    </main>

    <footer class="fixed bottom-0 w-full p-4 bg-black border-t border-gray-800">
        <div class="max-w-4xl mx-auto flex gap-2">
            <input type="text" id="user-input" placeholder="Mera AI se kuch bhi poochein..." 
                class="flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500" disabled>
            <button id="send-btn" class="bg-blue-600 p-3 rounded-xl disabled:opacity-50" disabled>
                <svg viewBox="0 0 24 24" class="w-6 h-6 fill-white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
            </button>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        // Aapka provide kiya hua Config
        const firebaseConfig = {
            apiKey: "AIzaSyDcP8JMCw4IBafedobiBK7kP0cC1JkQPkk",
            authDomain: "mera-ai-9d18f.firebaseapp.com",
            projectId: "mera-ai-9d18f",
            storageBucket: "mera-ai-9d18f.firebasestorage.app",
            messagingSenderId: "762601726215",
            appId: "1:762601726215:web:6e02992adfab72ecc8a5a2"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const userInfo = document.getElementById('user-info');
        const userNameDisp = document.getElementById('user-name');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const chatBox = document.getElementById('chat-box');

        // Login Function
        loginBtn.onclick = async () => {
            try { await signInWithPopup(auth, provider); } 
            catch (e) { alert("Login Error: " + e.message); }
        };

        // Logout Function
        logoutBtn.onclick = () => signOut(auth);

        // Auth State Manager
        onAuthStateChanged(auth, (user) => {
            if (user) {
                loginBtn.classList.add('hidden');
                userInfo.classList.remove('hidden');
                userNameDisp.innerText = user.displayName;
                userInput.disabled = false;
                sendBtn.disabled = false;
            } else {
                loginBtn.classList.remove('hidden');
                userInfo.classList.add('hidden');
                userInput.disabled = true;
                sendBtn.disabled = true;
            }
        });

        // Simple Chat Interface
        sendBtn.onclick = () => {
            const text = userInput.value.trim();
            if(!text) return;
            
            chatBox.innerHTML += `<div class="text-right"><span class="bg-blue-600 px-4 py-2 rounded-2xl inline-block max-w-[80%]">${text}</span></div>`;
            userInput.value = "";
            
            // Artificial AI Response
            setTimeout(() => {
                chatBox.innerHTML += `<div class="text-left"><span class="bg-gray-800 px-4 py-2 rounded-2xl inline-block max-w-[80%] text-blue-300"><b>Mera AI:</b> Ji, aap ne sahi kaha! Main aapka apna AI hoon.</span></div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 1000);
        };
    </script>
</body>
</html>

